# 方向矫正

```csharp
private void HandleMovement()
    {
        Vector2 inputVector = gameInput.GetMovementNormalized();
        if (inputVector == Vector2.zero)
        {
            isRun = false;
            return;
        }

        // 世界空间下的输入
        Vector3 moveDir = new Vector3(inputVector.x, 0, inputVector.y);

        // 输入矫正，cameraPlanarDirection始终与角色平面平行
        Vector3 cameraPlanarDirection = Vector3.ProjectOnPlane(Camera.main.transform.forward , transform.up);
        Quaternion cameraPlanarRotation = Quaternion.LookRotation(cameraPlanarDirection, transform.up);
        moveDir = cameraPlanarRotation * moveDir;
        moveDir = moveDir.normalized;

        float rotateSpeed = 10f;
        transform.forward = Vector3.Slerp(transform.forward, moveDir, Time.deltaTime * rotateSpeed);
        transform.position += moveDir * speed * Time.deltaTime;
        isRun = true;
    }
```

‍
